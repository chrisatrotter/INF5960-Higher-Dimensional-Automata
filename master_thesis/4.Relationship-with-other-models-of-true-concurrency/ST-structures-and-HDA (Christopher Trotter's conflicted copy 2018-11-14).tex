\section{ST-structures and HDAs}
\label{sec:st-structure-and-hda}

    For ST-structures to precisely identify events in higher-dimensional automata we need a way of translating ST-structures into higher-dimensional automata. Johansen in \cite{Johansen16STstruct} provides a way of translating ST-structures into higher-dimensional automata as follows.

    \begin{definition}[$\allST$ to $\allHDA$ \cite{Johansen16STstruct}]
        \label{def:ST-structures-to-HDA}
        We define a mapping $\stintoh : \allST \rightarrow \allHDA$ from ST-structures into $\HDA$s which for an $\ST=(E,ST,l)$ with the events linearly ordered as a list $\evlist{E}$ (that is, each event being indexed by a natural number, as in a sequence) returns the $\HDA$ $\stintoh(\ST)$ which
    
        \begin{itemize}
            \item has cells $\mathcal{Q} = \{q^{(\mathcal{S},\mathcal{T})}\in \mathcal{Q}_{n} \mid (\mathcal{S},\mathcal{T})\in ST \mbox{ and } |\mathcal{S} \setminus \mathcal{T}|=n\}$;
            \item for any two cells $q^{(\mathcal{S},\mathcal{T})}$ and $q^{(S\setminus e,T)}$ add the map entry $s_{i}(q^{(\mathcal{S},\mathcal{T})})=q^{(\mathcal{S} \setminus e,\mathcal{T})}$ where $i$ is the index of the event $e$ in the listing $\evlist{E}\!\!\downarrow_{(\mathcal{S} \setminus \mathcal{T})}$;
            \item for any two cells $q^{(\mathcal{S},\mathcal{T})}$ and $q^{(\mathcal{S},\mathcal{T} \cup e)}$ add the map entry $t_{i}(q^{(\mathcal{S},\mathcal{T})})=q^{(\mathcal{S},\mathcal{T} \cup e)}$ where $i$ is the index of the event $e$ in the listing $\evlist{E}\!\!\downarrow_{(\mathcal{S} \setminus \mathcal{T})}$;
            \item has labelling $l(q^{(\mathcal{T} \cup e,\mathcal{T})})=l(e)$ for any $q^{(\mathcal{T} \cup e,\mathcal{T})}\in \mathcal{Q}_{1}$.
        \end{itemize}

        More precisely, by $\evlist{E}\!\!\downarrow_{(\mathcal{S} \setminus \mathcal{T})}$ we represent the listing of the events in $\mathcal{S} \setminus \mathcal{T}$, namely, a list of dimension $|\mathcal{S} \setminus \mathcal{T}|$ obtained from the original listing $\evlist{E}$ by removing all other events. This new listing has the events of $\mathcal{S} \setminus \mathcal{T}$ in the same original order but with new indexes attached (ranging from $1$ to $|\mathcal{S} \setminus \mathcal{T}|$).
    \end{definition}

    As shown in \cite[Theorem 3.36]{Johansen16STstruct}, the mapping $\stintoh$ associates a rooted, connected, and adjacent-closed ST-structure with $\stintoh(\ST)$, which is a higher-dimensional automaton respecting the precubical identities and is acyclic. The non-degenerate property of higher-dimensional automata is defined by the underlying precubical set. Hence, the property of non-degeneracies is preserved. As shown by Johansen in \cite[Lemma 3.37]{Johansen16STstruct}, the way the events are picked in the definition of the mapping $\stintoh$ do not matter.


    Higher-dimensional automata are not good at identifying events and can be demonstrated by Example \ref{exp:asymmetric-conflict}, which represents the \emph{asymmetric conflict}. However, higher-dimensional automata can be faithfully represented as ST-structures which can precisely identify events.

    %The example is taken from \cite{Johansen16STstruct}, however, the example is well known and widely used in the literature \cite{Johansen16STstruct, GlabbeekP09configStruct, Pratt03trans_cancel}.

    \begin{example}[Strong asymmetric conflict]
        \label{exp:asymmetric-conflict}
        This example is taken from \cite[Example 3.38]{Johansen16STstruct}, but can also be found in \cite[Example 3]{GlabbeekP09configStruct}, and in \cite[page.22]{Pratt03trans_cancel} the asymmetric conflict is considered \emph{strong}. 
    
        %This example shows the gain in expressive power of the ST-structure over pure event structures, hence configurations structures. We have only considered prime event structures in this thesis, however, they are similar to pure event structures in \cite[Definition 1.5]{GlabbeekP09configStruct}. The asymmetric conflict can be captured by the unrestricted event structure of \cite{GlabbeekP09configStruct}, which is an extension of prime event structure with a binary conflict relation. Also, asymmetric conflict can be captured by the adjacent-closed ST-structure of Figure \ref{fig:asymmetric-conflict-st-hda} (left).
    
        \begin{figure}[ht]
            \centering
            \includegraphics[scale=0.9]{Figures/4.Relationship-with-other-models-of-concurrency/ST-structure-and-HDA/Asymmetric-conflict.pdf}
            \captionof{figure}[Asymmetric conflict]{Example of ST-structures and higher-dimensional automata representing the asymmetric conflict $a + b$. The higher-dimensional automaton (left) is isomorphic to the higher-dimensional automaton (right). On the other hand, we see that the ST-structure (left) is not isomorphic to the ST-structure (right). Since, the ST-structure (left) is on two events and the ST-structure (right) is on three events.}
            \label{fig:asymmetric-conflict-st-hda}
        \end{figure}
    
        The example has no concurrency and involves two events, imposing the only restriction that once event $a$ happens, then event $b$ cannot occur anymore. 
    
        %The notion of asymmetric conflict for event structures has been studied by Baldan et al. in \cite{Baldan01AsymmetricES}.
    
        Higher-dimensional automata are not good at identifying the particular events, making the representation of the example as a higher-dimensional automaton challenging. Higher-dimensional automata are state-based models that represent events by actions, where actions are labels for the particular events. These actions may occur multiple times, where events only occur once in an execution. The standard way of identifying events in higher-dimensional is by equivalence classes of transitions, where two transitions are equivalent when they are parallel in the boundary of a filled square, see Figure \ref{fig:HDA-filled-interleaving-square}.
    
        The equivalence classes of transitions for higher-dimensional automata, shown in Figure \ref{fig:asymmetric-conflict-st-hda} (left), would not result in the corresponding 2-event ST-structure, which is what we want. However, would result in the 3-event ST-structure of Figure \ref{fig:asymmetric-conflict-st-hda} (right). The 2-event ST-structure is not isomorphic to the 3-event ST-structure. On the other hand, the two representations of the higher-dimensional automata from Figure \ref{fig:asymmetric-conflict-st-hda} (left and right) are isomorphic.
    \end{example}

%\begin{example}[Strong asymmetric conflict]\label{exp:asymmetric-conflict}
%This example, taken from \cite[Ex .3]{GlabbeekP09configStruct} (called \textit{strong} in \cite[p.22]{Pratt03trans_cancel}), shows the gain in expressive power of the ST-structures. Asymmetric conflict cannot be captured in the \emph{pure event structures} of \cite[Def.1.5]{GlabbeekP09configStruct}, hence not by the configuration structures. Asymmetric conflict can be captured by the unrestricted event structures of \cite{GlabbeekP09configStruct}, and thus, also by the adjacent-closed ST-structure of Fig.~\ref{fig:asymmetric-conflict-st-hda} (left).

%\begin{figure}[ht]
%        \centering
%        \includegraphics[scale=0.9]{Figures/4.Relationship-with-other-models-of-concurrency/ST-structure-and-HDA/Asymmetric-conflict.pdf}
%         \captionof{figure}[Asymmetric conflict]{asymmetric conflict of HDA and ST.}
%        \label{fig:asymmetric-conflict-st-hda}
%    \end{figure}

%The example has no concurrency and involves two events, imposing the only restriction that once event $s$ happens, event $b$ cannot happen any more. The notion of \emph{asymmetric conflict} for even structures has been studies in \cite{Baldan01AsymmetricES}.

%Within $\HDA$ it is more cumbersome to represent this example because $\HDA$ are not good at identifying the particular events. $\HDA$ abstract from the concrete events and concentrate only on the labels. 
%The standard way of identifying events is by equivalence classes of transitions, where two transitions are equivalent when they are parallel in the boundary of a filled square (i.e., what we assumed until now in our $\HDA$ examples).


%Applying this technique to the $\HDA$ in Figure ~\ref{fig_ex_asymconflict1}(middle) would not result in the corresponding 2-events ST-structure (which is what we want), but would result in the 3-events ST-structure of Fig.~\ref{fig_ex_asymconflict1}(right), and these two ST-structures are not isomorphic.
%On the other hand, the two representations of $\HDA$ from Fig.~\ref{fig_ex_asymconflict1}(middle and right) are isomorphic. 
%Nevertheless, if we are interested in representing systems only up to hh-bisimulation, then both $\HDA$ and ST-structures are as good, because the different representations of ST-structures (with 2 or 3 events) would be equated by the hh-bisimulation.
%\end{example}


%From Example \ref{exp:asymmetric-conflict}, we see that non-isomorphic ST-structures collapse into isomorphic higher-dimensional automata. A proof for Proposition \ref{prop:ST-structure-to-HDA-isomorphism}, taken from \cite[Proposition 3.39]{Johansen16STstruct}, is shown by Johansen, where the mapping $\stintoh$ either preserves isomorphism or collapses non-isomorphic ST-structures into isomorphic higher-dimensional automata. We will provide the proof by Johansen found in \cite[Proposition 3.39]{Johansen16STstruct}.

%\begin{proposition}\
%\label{prop:ST-structure-to-HDA-isomorphism}
%    \begin{enumerate}
%        \item\label{prop_stintoh_iso_1} The mapping $\stintoh$ from Definition~\ref{def:ST-structures-to-HDA} preserves isomorphism
%        \[
%            \mbox{for } \ST \isomorphic \ST' \mbox{ then } \stintoh(\ST) \isomorphic \stintoh(\ST').
%        \]
%        \item\label{prop_stintoh_iso_collapse} The mapping $\stintoh$ may collapse non-isomorphic ST-structures into isomorphic $\HDA$.
%    \end{enumerate}
%\end{proposition}
    
    In \cite[Proposition 3.39]{Johansen16STstruct}, the mapping $\stintoh$ from Definition~\ref{def:ST-structures-to-HDA} preserves isomorphism. However, it may collapse non-isomorphic ST-structures into isomorphic higher-dimensional automata. Consider the two ST-structures from Figure~\ref{fig:asymmetric-conflict-st-hda} which are not isomorphic since the left one is defined by two events while the right one is defined by three events, whereas the higher-dimensional automata that the mapping $\stintoh$ associates are isomorphic. This means that $\stintoh$ is not an embedding from $\allST$ to $\allHDA$ since it looses information, namely, the events. A natural question to raise is if a mapping from $\allHDA$ to $\allST$ is then an embedding from $\allHDA$ to $\allST$. We will first define a mapping from $\allHDA$ to $\allST$.

    \begin{definition}[$\allHDA$ to $\allST$ \cite{Johansen16STstruct}]
        \label{def:HDA-to-ST-structure}
        Consider a non-degenerate $\HDA$ $H=(\mathcal{Q},\overline{s},\overline{t},l,I)$. Define a relation $\eventEquivHDAs\subseteq \mathcal{Q}_{1}\times \mathcal{Q}_{1}$ on transitions as 
    
        \[
            q_{1}\eventEquivHDAs q_{1}' \mbox{\hspace{2ex} iff \hspace{2ex}} \exists q_{2}\in \mathcal{Q}_{2}:\alpha_{i}(q_{2})=q_{1}\wedge \beta_{i}(q_{2})=q_{1}'
        \]

        for some $i\leq 2$ and $\alpha,\beta\in\{s,t\}$. Consider the reflexive and transitive closure of the above relation, and denote it the same. This is now an equivalence relation on $\mathcal{Q}_{1}$. Consider an equivalence class $\equivClass{q_{1}}$ to be all $q_{1}'$ equivalent with $q_{1}$. Such an equivalence class is called \emph{an event}.

        Define a map $\ST:\allHDA \rightarrow \allST$ which builds an ST-structure $\ST(H)$ by associating to each rooted path $\pi\in H$ an ST-configuration as follows.

        \begin{enumerate}
            \item\label{hintost_1} for the minimal rooted path which ends in $I$ associate $(\emptyset,\emptyset)$;
            \item\label{hintost_2} for any path $\pi$ which ends in a transition $\finishPath{\pi}=q_{1}\in \mathcal{Q}_{1}$ then 
        
            \begin{enumerate}
                \item\label{hintost_21} add the ST-configuration $\hintost(\pi)=\hintost(\pi_{s})\cup(\equivClass{q_{1}},\emptyset)$, where $\pi_{s}$ is a shorter path reaching through an s-map the homotopy class of $\pi$, that is, $\pi_{s}\transition{s}q_{1}\in\homotopyClass{\pi}$;
                \item\label{hintost_22} add the ST-configuration $\hintost(\pi\transition{t}q_{0})=\hintost(\pi)\cup(\emptyset,\equivClass{q_{1}})$;
            \end{enumerate}

            \item\label{hintost_3} for any path $\pi$ which ends in a higher cell $\finishPath{\pi}=q_{n}\in \mathcal{Q}_{n}$, with $n\geq 2$, then add the ST-configuration $\hintost(\pi)=\hintost(\pi^{i})\cup\hintost(\pi^{j})$, with $\pi^{i}\neq\pi^{j}$, $\pi^{i}\transition{s}q_{n}\in\homotopyClass{\pi}$, and $\pi^{j}\transition{s}q_{n}\in\homotopyClass{\pi}$.
        \end{enumerate}
    \end{definition}

    As shown in \cite[Proposition 3.42]{Johansen16STstruct}, the mapping $\ST$ associates an acyclic and non-degenerate higher-dimensional automata with $\ST(H)$, which is a rooted, connected, and adjacent-closed ST-structure. Furthermore, in \cite[Proposition 3.44]{Johansen16STstruct}, the mapping $\ST$ from Definition~\ref{def:HDA-to-ST-structure} preserves isomorphism of reachable parts. However, it may collapse non-isomorphic higher-dimensional automata into isomorphic ST-structures. This can be seen by considering the two higher-dimensional automata from Figure \ref{fig:Unfolding-HDA}, which are translated into the same ST-structure by $\ST$. The mapping $\ST$ considers the two higher-dimensional automata which are not isomorphic to be two ST-structures which are isomorphic. The higher-dimensional automata are not isomorphic since the right one has a split corner whereas the left one is a square with its faces nicely placed, forming a complete square. 
    
    
        
    %    \begin{figure}[ht]
    %        \centering
    %        \includegraphics[scale=0.9]{Figures/4.Relationship-with-other-models-of-concurrency/ST-structure-and-HDA/HDA-collapse-triangle.pdf}
    %        \captionof{figure}[History unfolding of a triangular $\HDA$ through $\hintost$]{Example of ST-structures and higher-dimensional automata representing the unfoldings of a triangular $\allHDA$ through $\hintost$. The ST-structure (left) is isomorphic to ST-structure (right). On the other hand, we see the higher-dimensional automaton (right) is not isomorphic to the higher-dimensional automaton (left). Since, the higher-dimensional automaton (left) has a split corner and the higher-dimensional automaton (right) is a nicely shaped square.}
    %        \label{fig:Unfolding-triangle-HDA}
    %    \end{figure}
        
    \begin{figure}[ht]
        \centering
        \includegraphics[scale=0.9]{Figures/4.Relationship-with-other-models-of-concurrency/ST-structure-and-HDA/HDA-collapse.pdf}
        \captionof{figure}[History unfolding of a square $\HDA$ through $\hintost$]{Example of ST-structures and higher-dimensional automata representing the unfoldings of a square $\HDA$ through $\hintost$. The ST-structure (left) is isomorphic to ST-structure (right). On the other hand, we see the higher-dimensional automaton (right) is not isomorphic to the higher-dimensional automaton (left). Since, the higher-dimensional automaton (right) has a split corner and the higher-dimensional automaton (left) is a nicely shaped square.}
        \label{fig:Unfolding-HDA}
    \end{figure}
    
    The mapping $\ST$ is not an embedding from $\allHDA$ to $\allST$ since it looses information, which is the mappings ability to announce the difference between when $a$ happens before $b$, or $b$ happens before $a$. In other words, being able to see the difference between the split corner of a square and a nicely shaped square.



    %\ctlong{Add the things I need from the Journal here. ST-paper. Include the Assymetrical conflict. That this cannot be done with HDAs, but faithfully done with ST-structures.}

    %\section*{Broken box example}

    %This is the example of van Glabbeek [3, Fig.11], pictured here in Figure x, with the cube with one face missing, and its strange looking unfolding where the corner is split into two.

    %\ctlong{edit the model to be more similar to the example provided in \cite{Johansen16STstruct}}
    %\input{master_thesis/figures/broken box(figure 6 left)/cube.tex}

    %Just a quick draft before the end of the day:

    %As part of the example given by van Glabbeek, it provides the idea of having the possibility to exclude the mutual exclusive based on the order action A, B and C occur. A and B are two computer scientist competing to get to the podium and at the middle there is an obstacle which prevents both of them run at the same time. Also, we have an independent person C which removes the obstacle to allow A and B to run independently. If A passes the obstacle before B, or vice versa, then a last person D, or E, is to give an announcement preventing C from removing the obstacle.

    %\ctlong{Draw up the new model of the broken box. (check)}
    %\ctlong{Write an introduction to the broken box example.}
    %\ctlong{Explain the problem that arises from the example.
    %	- non-isomorphic HDA into isomorphic ST-structures.
    %	- hereditary history preserving HDA.}


    %We have now the figure 6 left(broken box) and a new figure(upside box). When we do the unfolding of the upside box, we get the broken box. We can see that the upside box is a sculpture, but its unfolding is not.

    In Figure \ref{fig:asymmetric-conflict-st-hda}, we can see that higher-dimensional automata are not able to precisely identify events, but can be faithfully interpreted as ST-structures. ST-structures are able to precisely capture events while events in higher-dimensional automata are not easily captured. As we have shown in Figure \ref{fig:Unfolding-HDA}, ST-structures are not able to capture the difference between a higher-dimensional automaton and the unfolding of that higher-dimensional automaton. Hence, some processes might only be able to be represent as higher-dimensional automata, and identifying precisely these events of the processes would be challenging. We are interested in finding a model that is able to capture the aspect of higher-dimensional automata, but also be faithfully translated to ST-structures. In this regard, we will investigate Chu spaces and ST-structures.